<!-- 登录页面 - 匹配 Figma 设计稿 -->
<view class="login-page">
  <!-- 顶部装饰背景 -->
  <view class="header-bg">
    <view class="header-curve"></view>
  </view>

  <!-- Logo 区域 -->
  <view class="logo-area">
    <view class="logo-circle">
      <image class="logo-img" src="cloud://cloud1-5gh4dyhpb180b5fb.636c-cloud1-5gh4dyhpb180b5fb-1406006729/images/logo.png" mode="aspectFit" />
    </view>
    <text class="brand-name">小赵面食</text>
    <text class="brand-slogan">用心烘焙每一份温暖</text>
  </view>

  <!-- 登录卡片 -->
  <view class="login-card">
    <view class="card-header">
      <text class="welcome-title">欢迎回来</text>
      <text class="welcome-subtitle">登录后享受更多会员权益</text>
    </view>

    <!-- 已登录用户预览 -->
    <view class="user-card" wx:if="{{userInfo.nickName}}">
      <image class="user-avatar" src="{{userInfo.avatarUrl}}" mode="aspectFill" />
      <text class="user-name">{{userInfo.nickName}}</text>
      <text class="user-tip">点击头像可更换</text>
    </view>

    <!-- 登录按钮组 -->
    <view class="login-actions">
      <!-- 微信一键登录 -->
      <button
        class="btn btn-primary btn-wechat"
        bindtap="onWechatLogin"
        loading="{{isLoading}}"
        disabled="{{isLoading}}"
      >
        <text class="btn-icon">💬</text>
        <text class="btn-text">微信一键登录</text>
      </button>

      <!-- 获取头像（未登录时显示） -->
      <button
        class="btn btn-secondary"
        open-type="chooseAvatar"
        bind:chooseavatar="onChooseAvatar"
        wx:if="{{!userInfo.avatarUrl && !isLogin}}"
      >
        <text class="btn-text">选择微信头像</text>
      </button>

      <!-- 绑定手机号 -->
      <button
        class="btn btn-secondary btn-phone"
        open-type="getPhoneNumber"
        bind:getphonenumber="onGetPhoneNumber"
        wx:if="{{isLogin && !userInfo.phoneNumber}}"
      >
        <text class="btn-icon">📱</text>
        <text class="btn-text">绑定手机号</text>
      </button>
    </view>

    <!-- 用户协议 -->
    <view class="agreement-box">
      <view class="checkbox-wrap" bindtap="onAgreementToggle">
        <view class="checkbox {{agreed ? 'checked' : ''}}">
          <image wx:if="{{agreed}}" class="check-icon" src="{{icons.check}}" mode="aspectFit" />
        </view>
      </view>
      <text class="agreement-text">
        我已阅读并同意
        <text class="link" catchtap="onUserAgreementTap">《用户协议》</text>
        和
        <text class="link" catchtap="onPrivacyPolicyTap">《隐私政策》</text>
      </text>
    </view>
  </view>

  <!-- 会员权益 -->
  <view class="benefits-area">
    <view class="section-title">
      <view class="title-line"></view>
      <text class="title-text">会员权益</text>
      <view class="title-line"></view>
    </view>

    <view class="benefits-grid">
      <view class="benefit-item">
        <view class="benefit-icon" style="background: #FFF0F0;">
          <text>🎂</text>
        </view>
        <text class="benefit-name">生日特权</text>
      </view>
      <view class="benefit-item">
        <view class="benefit-icon" style="background: #FFF8EE;">
          <text>💰</text>
        </view>
        <text class="benefit-name">积分抵现</text>
      </view>
      <view class="benefit-item">
        <view class="benefit-icon" style="background: #E8F8F7;">
          <text>🎁</text>
        </view>
        <text class="benefit-name">专属优惠</text>
      </view>
      <view class="benefit-item">
        <view class="benefit-icon" style="background: #F0F9EB;">
          <text>🚀</text>
        </view>
        <text class="benefit-name">优先配送</text>
      </view>
    </view>
  </view>

  <!-- 底部返回 -->
  <view class="footer-action">
    <text class="back-link" bindtap="onBackTap">暂不登录，先逛逛</text>
  </view>
</view>

<!-- Toast 提示 -->
<toast id="toast"></toast>
