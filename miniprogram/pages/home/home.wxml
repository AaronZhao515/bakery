<!-- é¦–é¡µ -->
<view class="home-container">
  <!-- è‡ªå®šä¹‰å¯¼èˆªæ  -->
  <view class="custom-nav" style="height: {{navBarHeight}}px; padding-top: {{statusBarHeight}}px;">
    <view class="nav-content">
      <view class="location" bindtap="onLocationTap">
        <text class="location-icon">ğŸ“</text>
        <text class="location-text">{{location || 'è¯·é€‰æ‹©ä½ç½®'}}</text>
        <text class="location-arrow">â–¼</text>
      </view>
    </view>
  </view>

  <!-- æœç´¢æ  -->
  <view class="search-section" style="margin-top: {{navBarHeight}}px;">
    <view class="search-bar" bindtap="onSearchTap">
      <text class="search-icon">ğŸ”</text>
      <text class="search-placeholder">æœç´¢ç¾å‘³çš„é¢åŒ…...</text>
    </view>
  </view>

  <!-- è½®æ’­å›¾ -->
  <view class="banner-section">
    <swiper class="banner-swiper" indicator-dots="{{true}}" autoplay="{{true}}" interval="4000" duration="500" circular="{{true}}" indicator-color="rgba(255,255,255,0.5)" indicator-active-color="#D4A574">
      <swiper-item wx:for="{{banners}}" wx:key="id" bindtap="onBannerTap" data-item="{{item}}">
        <image class="banner-image" src="{{item.image}}" mode="aspectFill" lazy-load="{{true}}" />
        <view class="banner-overlay">
          <text class="banner-title">{{item.title}}</text>
          <text class="banner-subtitle">{{item.subtitle}}</text>
        </view>
      </swiper-item>
    </swiper>
  </view>

  <!-- å¿«æ·å…¥å£ -->
  <view class="quick-entry-section card">
    <view class="quick-entry-item" wx:for="{{quickEntries}}" wx:key="id" bindtap="onQuickEntryTap" data-item="{{item}}">
      <view class="quick-entry-icon" style="background: {{item.bgColor}};">
        <text>{{item.icon}}</text>
      </view>
      <text class="quick-entry-text">{{item.name}}</text>
    </view>
  </view>

  <!-- é…é€æ–¹å¼é€‰æ‹© -->
  <view class="delivery-section card">
    <view class="delivery-header">
      <text class="delivery-title">é€‰æ‹©é…é€æ–¹å¼</text>
      <text class="delivery-time">é¢„è®¡ {{deliveryTime}} é€è¾¾</text>
    </view>
    <view class="delivery-options">
      <view class="delivery-option {{deliveryType === 'pickup' ? 'active' : ''}}" bindtap="onDeliveryTypeChange" data-type="pickup">
        <view class="option-icon">ğŸª</view>
        <view class="option-info">
          <text class="option-name">é¢„å®šè‡ªå–</text>
          <text class="option-desc">åˆ°åº—å³å– å…æ’é˜Ÿ</text>
        </view>
        <view class="option-check {{deliveryType === 'pickup' ? 'active' : ''}}">
          <text wx:if="{{deliveryType === 'pickup'}}">âœ“</text>
        </view>
      </view>
      <view class="delivery-option {{deliveryType === 'delivery' ? 'active' : ''}}" bindtap="onDeliveryTypeChange" data-type="delivery">
        <view class="option-icon">ğŸšš</view>
        <view class="option-info">
          <text class="option-name">é¢„å®šé…é€</text>
          <text class="option-desc">æ–°é²œç›´è¾¾ å‡†æ—¶é€è¾¾</text>
        </view>
        <view class="option-check {{deliveryType === 'delivery' ? 'active' : ''}}">
          <text wx:if="{{deliveryType === 'delivery'}}">âœ“</text>
        </view>
      </view>
    </view>
  </view>

  <!-- æ¨èå•†å“ -->
  <view class="recommend-section">
    <view class="section-header">
      <view class="section-title">
        <text class="title-icon">â­</text>
        <text>ä»Šæ—¥æ¨è</text>
      </view>
      <view class="section-more" bindtap="onMoreTap">
        <text>æŸ¥çœ‹æ›´å¤š</text>
        <text class="more-arrow">â€º</text>
      </view>
    </view>

    <!-- å•†å“åˆ—è¡¨ -->
    <view class="product-list">
      <view class="product-card" wx:for="{{recommendProducts}}" wx:key="id" bindtap="onProductTap" data-id="{{item.id}}">
        <view class="product-image-wrapper">
          <image class="product-image" src="{{item.image}}" mode="aspectFill" lazy-load="{{true}}" />
          <view class="product-tag" wx:if="{{item.tag}}" style="background: {{item.tagColor}};">{{item.tag}}</view>
        </view>
        <view class="product-info">
          <text class="product-name">{{item.name}}</text>
          <text class="product-desc">{{item.description}}</text>
          <view class="product-bottom">
            <view class="product-price">
              <text class="price price-large">{{item.price}}</text>
              <text wx:if="{{item.originalPrice}}" class="original-price">{{item.originalPrice}}</text>
            </view>
            <view class="product-sales">å·²å”® {{item.sales}}</view>
          </view>
          <view class="add-cart-btn" catchtap="onAddCart" data-item="{{item}}">
            <text>+</text>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- åŠ è½½æ›´å¤š -->
  <view class="load-more" wx:if="{{loading}}">
    <text>åŠ è½½ä¸­...</text>
  </view>
  <view class="load-more" wx:if="{{!hasMore && recommendProducts.length > 0}}">
    <text>å·²ç»åˆ°åº•å•¦~</text>
  </view>

  <!-- åº•éƒ¨å®‰å…¨åŒºåŸŸ -->
  <view class="safe-area-bottom"></view>
</view>
